#!/bin/sh

echo "Running go fmt..."
unformatted=$(gofmt -l .)

[ -z "$unformatted" ] || {
  echo "Unformatted files:"
  echo "$unformatted"
  exit 1
}

echo "Running go vet..."
go vet ./... || {
  echo "go vet failed"
  exit 1
}

echo "Running tests..."
go test ./... || {
  echo "Tests failed"
  exit 1
}

git diff --cached --check || {
  echo "Whitespace errors detected"
  exit 1
}

echo "âœ“ All checks passed"
